# 8. 자원 할당

## 1. 자원 환경 변경

`docker update $(변경할 자원제한) $(container name)`

```bash
docker update --cpuset-cpus=1 ubuntu
```

## 2. 자원 제한 옵션

### 1. memory 제한

--memory="4g"
--memory="400m"

### 2. CPU 할당 제한

--cpu-shares 1024
기본값은 1024이며, CPU 할당 전체를 의미하지 않음.
다른 컨테이너와 경쟁할 때 상대적 우선순위를 결정.
값이 클수록 CPU 사용 우선순위가 높음.

--cpus="2.0"
컨테이너가 사용할 수 있는 CPU 최대 코어 수를 제한.
예: 2.0 → 최대 2코어까지 사용 가능

--cpuset-cpus="0,1"
컨테이너가 사용할 특정 CPU 코어를 지정.
예: 0,1 → CPU 0번과 1번 코어만 사용

--cpu-period=100000
CPU 제한 계산 단위 기간 지정(마이크로초)
기본값: 100000 μs (0.1초)
CPU 사용량을 제한할 때 쿼타 기준 시간 단위

--cpu-quota
cpu-period 단위로 CPU 사용 최대 시간 지정
예: --cpu-period=100000 --cpu-quota=50000 → 0.1초 중 0.05초만 CPU 사용 가능 → 50% 제한

### 3. BLOCK-IO 제한

Docker에서는 컨테이너가 디스크 읽기/쓰기 속도를 제한할 수 있는 옵션이 있습니다.

--blkio-weight
상대적 I/O 우선순위를 지정
값 범위: 10 ~ 1000
기본값: 500
값이 클수록 다른 컨테이너 대비 디스크 I/O 우선순위가 높음

--device-read-bps
특정 장치에서 컨테이너가 읽을 수 있는 최대 바이트/초 제한
예: /dev/sda:1mb → sda에서 1MB/s 최대 읽기
`docker run --device-read-bps /dev/sda:1mb`

--device-write-bps
특정 장치에서 컨테이너가 쓸 수 있는 최대 바이트/초 제한
예: /dev/sda:2mb → sda에서 2MB/s 최대 쓰기
`docker run --device-write-bps /dev/sda:2mb`

--device-read-iops
특정 장치에서 컨테이너가 읽을 수 있는 최대 I/O 연산 수/초 제한
예: /dev/sda:1000 → 초당 최대 1000번 읽기
`docker run --device-read-iops /dev/sda:1mb`

--device-write-iops
특정 장치에서 컨테이너가 쓸 수 있는 최대 I/O 연산 수/초 제한
예: /dev/sda:500 → 초당 최대 500번 쓰기
`docker run --device-write-iops /dev/sda:500`


